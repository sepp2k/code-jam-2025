# Python HTML Tutorial - Preliminary Design Notes

## Idea

An HTML tutorial where the exercises need to be solved in Python.

## Why

If the goal is to teach HTML, then making the user write Python is definitely the wrong tool for the job. It's also a great fit for "Python in the browser": We write Python that runs in the browser to create a website that allows the users to themselves write Python, which then also runs in the browser.

## What

We create an HTML tutorial where in each chapter we first explain a given HTML feature and then include one or more exercises where our users are supposed to make use of said feature - by writing Python code like `div("Hello ", emph("world"), "!")`. We would then run the code that the user typed and display the resulting HTML next to the code entry box (or under it, whatever layout works better). We would also verify whether the task was completed successfully and display that to the user.

If the HTML generated by the user does not fit the structure required by the exercise, we'll tell the user what the problem is (e.g. for the task "Please create a div containing three words in which the middle word is emphasized.", possible error messages would be "You need to use the `emph` tag", "There should be only three words", "Only the middle word should be emphasized" etc.).

## How

This part is a bit less clear right now. The first approach that came to my mind is:

We provide a bunch of functions that generate HTML (either by defining them ourselves or using a library like htpy). We then take the code that the user entered and `eval` it in an environment where those functions are available. If the code produces an error, we display said error to the user, otherwise we take the HTML returned by the expression, validate according to the exercise, and put it into the part of the page where the result is supposed to be displayed.

This can be extended in many ways, such as:

• Allowing the user to enter multiple expressions. To achieve this we could `ast.parse` the code and iterate over it, `eval` each expression statement we see and complain about any statement that's not an expression.
• Allowing the user to define helper function which they can then use inside the expressions. For this, we would take any `def` we find in the code and `exec` it into the environment in which we `eval` the expression(s).
• Allowing the user to define functions which can then be used as event handlers (i.e. adding a "JavaScript" section to the tutorial). The implementation would be the same as before, but we'd extend the HTML-generating functions to accept things like `onclick=my_def`.

To validate the exercises, we could check the structure of the DOM after generating the HTML.

## Open questions

### Which technology to use

I think PyScript looks easiest from a quick look, but I'm not familiar with any of them.

### Lots of other things that we can figure out as we go
